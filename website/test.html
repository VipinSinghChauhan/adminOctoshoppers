<html>
<head>

</head>
<style>

th, td, p, input {
            font:14px Verdana;
			text-align:center;
        }
        table, th, td 
        {
            padding: 2px 3px;
			
        }
        th {
            font-weight:bold;
			background-color:black;
			color:white;
            text-align:center;
			height:50px;
        }
		td,th {
		width:200px;
		border-bottom: 2px solid black;
		}
td{
background-color:#F8F8F8 ;
color:black;
}
table {
margin-top:20px;
margin-left:100px;
padding:20px;
border:2px solid white;
}

.div1:hover{
cursor:hand;
}

button{
}
</style>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<script>

var sessionAdmin = sessionStorage.getItem("sessionAdminPortal");
console.log(sessionAdmin);
var sessionAdd = sessionStorage.getItem("add1");
var sessionUpdate = sessionStorage.getItem("update1");

if(sessionAdmin!="Admin")
window.location.href = "login.html";

window.onload = function(){
var url  = "https://projectvlc.azurewebsites.net/getAllProduct";
var xhr  = new XMLHttpRequest();
xhr.open('GET', url, false);
xhr.onload = function () {
	userss = JSON.parse(xhr.responseText);
	if (xhr.readyState == 4 && xhr.status == "200") {
		console.log(userss);
	} else {
		console.error(userss);
	}
	var len = userss["recordsets"][0].length;
		
	
	   var col = [];
        for (var i = 0; i < userss["recordsets"][0].length; i++) {
            for (var key in userss["recordsets"][0][i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }
		col.push("Actions");
		console.log(userss["recordsets"][0][0][col[0]]);
var table = document.createElement("table");

        // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

        var tr = table.insertRow(-1);                   // TABLE ROW.
		var i = 0;
		var cols = ["ID","NAME","AISLE","OFFERS","ACTIONS"];
        for (i = 0; i < cols.length; i++) {
            var th = document.createElement("th");      // TABLE HEADER.
            th.innerHTML = cols[i];
            tr.appendChild(th);
        }

        // ADD JSON DATA TO THE TABLE AS ROWS.
		var i = 0;
        for (i = 0; i < userss["recordsets"][0].length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length-1; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = userss["recordsets"][0][i][col[j]];
				
				}
				<!-- x.addEventListener('click',getId(this)); -->
				<!-- alert(tabCell.parentNode.parentNode.rowIndex); -->
				<!-- }); -->
				var c = tr.insertCell(j);
			d1 = document.createElement("DIV");
			d1.setAttribute("class","div1");
			
			d2 = document.createElement("DIV");
			d2.style.width="10px";
			console.log(i);
			d2.setAttribute("id","edit "+userss["recordsets"][0][i][col[1]]);
			s1 = document.createElement("button");
			s1.style.paddingLeft="10px";
			s1.style.paddingBottom="5px";
			s1.innerHTML="&nbspEdit";
			s1.style.backgroundColor="black";
			s1.style.color="white";
			s1.style.height="30px";
			s1.style.width="90px";
			s1.style.borderRadius="8px";
			s1.setAttribute("class","glyphicon glyphicon-pencil");
			
			
			
			<!-- id = userss["recordsets"][0][i][col[1]]; -->
			<!-- d2.addEventListener('click',getId(id)); -->
			
			d3 = document.createElement("DIV");
			d3.style.width="50px";
			d3.setAttribute("id","delete "+userss["recordsets"][0][i][col[1]]);
			s2 = document.createElement("button");
			s2.style.height="30px";
			s2.style.width="90px";
			s2.style.padding="2px";
			s2.style.backgroundColor="black";
			s2.style.color="white";
			s2.innerHTML = "&nbspDelete";
			s2.style.paddingLeft = "2px";
			s2.style.marginTop = "-30px";
			s2.style.marginLeft= "100px";
			s2.style.borderRadius="8px";
			s2.setAttribute("class","glyphicon glyphicon-trash");
			<!-- s1.setAttribute("id","delete"+userss["recordsets"][0][i][col[1]]); -->
			
			
			d1.appendChild(d2);
			d2.appendChild(s1);
			
			d1.appendChild(d3);
			d3.appendChild(s2);
			
			c.appendChild(d1);
			
			c.onclick = function(event){
			var x = event.path;
			var id = x[1].id
			if(!id.indexOf("edit")){
			var strs = id.split(" ");
			console.log(strs[1]);
			updateProduct(strs[1]);
			}
			else if(!id.indexOf("delete")){
			var strs = id.split(" ");
			console.log(strs[1]);
			deleteProduct(strs[1]);
			
			}
            }
			
			<!-- c.addEventListener('click',getId(this)); -->
			<!-- d1.addEventListener('click',function(event){ -->
			<!-- alert(); -->
			<!-- }); -->
			
			
        }

        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
    }
	xhr.send(null)	


function deleteProduct(x)
{

// Delete a user
var result = confirm("Do you want to delete: "+x+"!");
if(result==true)
{
var url = "https://projectvlc.azurewebsites.net/deleteProduct";
data = {};
data.pName = x;
var json = JSON.stringify(data);
var xhr = new XMLHttpRequest();
xhr.open("DELETE", url, true);
xhr.onload = function () {
	var users = JSON.parse(xhr.responseText);
	if (xhr.readyState == 4 && xhr.status == "200") {
		console.table(users);
	} else {
		console.error(users);
	}
}
xhr.send(json);

}
}



function updateProduct(x){
console.log(x);
sessionStorage.setItem("pName",x);
sessionStorage.setItem("update1","updateProduct");
window.location.href="update1.html";
}

function logout()
{
var sessionAdmin = sessionStorage.getItem("sessionAdminPortal");
console.log("LOGOUT");
var sessionAdd = sessionStorage.getItem("add1");
var sessionUpdate = sessionStorage.getItem("update1");

sessionStorage.removeItem(sessionAdd);
sessionStorage.removeItem(sessionUpdate);
sessionStorage.removeItem(sessionAdmin);

}

<!-- var x = document.getElementsByTagName('div'); -->
<!-- <!-- console.log(x.item(0).id); --> -->
<!-- <!-- console.log(x.length); --> -->
<!-- for(var v = 0;v < x.length;v++) -->
<!-- { -->
<!-- var d = x.item(v).id; -->
<!-- if(!d.indexOf("edit")){ -->
<!-- var result = d.split(" "); -->
<!-- d.onclick = function(event){ -->
<!-- console.log(event); -->
<!-- console.log(this); -->
<!-- alert(event); -->
<!-- }; -->

<!-- } -->

<!-- function getEditProduct(x) -->
<!-- { -->
<!-- console.log(x); -->
<!-- } -->

<!-- } -->

<!-- var test = document.getElementById('edit Laptop'); -->
<!-- test.addEventListener('click',function(event){ -->
<!-- console.log(event); -->
<!-- }); -->

}


		
<!-- function getId(event){ -->
<!-- alert(event); -->
<!-- } -->

<!-- var txt = ""; -->
<!-- for(i=0;i<x.length;i++) -->
<!-- { -->
	<!-- txt += "the index of row"+(i+1)+" is "+x[i].rowIndex+"<br>"; -->
<!-- } -->
<!-- alert(txt); -->

</script>
<body style="background-image:url('images/cubes-1920x1080.png')">

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">OCTOSHOPPERS</a>
    </div>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="login.html" onclick="logout()"><span class="glyphicon glyphicon-log-in" ></span> LOGOUT</a></li>
    </ul>
  </div>
</nav>



<button class="btn btn-dark" id = "add" onclick="addProduct()" style= "margin-top:20px;margin-left:100px;width:128px;height:30px;background-color:black;border: 2px solid white;">
<span class = "glyphicon glyphicon-plus" style="padding:2px;font-weight:bold;color:white">&nbspADD NEW</span>
</button>

<div id="showData">

</div>
<script>
function addProduct()
{
console.log("Add Product");
sessionStorage.setItem("add1","addProduct");
window.location.href="add1.html";
}
</script>
</body>
</html>